<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="一个90后老男孩的博客">
<meta name="keywords" content="springlee">
<meta property="og:type" content="website">
<meta property="og:title" content="一叶知秋">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="一叶知秋">
<meta property="og:description" content="一个90后老男孩的博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一叶知秋">
<meta name="twitter:description" content="一个90后老男孩的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>一叶知秋</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一叶知秋</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">一个90后老男孩的博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/20/linux-permision/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="springlee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars3.githubusercontent.com/u/3699948?s=400&u=d38df3f75e632cbdcd135872bb8ca7a049b7cf75&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一叶知秋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/20/linux-permision/" itemprop="url">Linux文件权限详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-20T11:39:20+08:00">
                2019-03-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="用户组"><a href="#用户组" class="headerlink" title="用户组"></a>用户组</h2><p>在linux中的每个用户必须属于一个组，不能独立于组外。在linux中每个文件有所有者、所在组、其它组的概念</p>
<ul>
<li>所有者</li>
<li>所在组</li>
<li>其它组</li>
<li>改变用户所在的组</li>
</ul>
<h2 id="所有者"><a href="#所有者" class="headerlink" title="所有者"></a>所有者</h2><p>一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者</p>
<p>用ls ‐ahl命令可以看到文件的所有者</p>
<p>也可以使用chown 用户名 文件名来修改文件的所有者</p>
<h2 id="文件所在组"><a href="#文件所在组" class="headerlink" title="文件所在组"></a>文件所在组</h2><p>当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组</p>
<p>用ls ‐ahl命令可以看到文件的所有组</p>
<p>也可以使用chgrp 组名 文件名来修改文件所在的组</p>
<h2 id="其它组"><a href="#其它组" class="headerlink" title="其它组"></a>其它组</h2><p>除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组</p>
<p>ls</p>
<p> -l中显示的内容如下：</p>
<p><code>-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc</code></p>
<ul>
<li><p>10个字符确定不同用户能对文件干什么</p>
</li>
<li><p>第一个字符代表文件（-）、目录（d），链接（l）</p>
</li>
<li><p>其余字符每3个一组（rwx），读（r）、写（w）、执行（x）</p>
</li>
<li><p>第一组rwx：文件所有者的权限是读、写和执行</p>
</li>
<li><p>第二组rw-：与文件所有者同一组的用户的权限是读、写但不能执行</p>
</li>
<li><p>第三组r–：不与文件所有者同组的其他用户的权限是读不能写和执行也可用数字表示为：r=4，w=2，x=1  因此rwx=4+2+1=7</p>
</li>
<li><p>1 表示连接的文件数</p>
</li>
<li><p>root 表示用户</p>
</li>
<li><p>root表示用户所在的组</p>
</li>
<li><p>1213 表示文件大小（字节）</p>
</li>
<li><p>Feb 2 09:39 表示最后修改日期</p>
</li>
<li><p>abc 表示文件名</p>
</li>
</ul>
<h2 id="改变权限的命令"><a href="#改变权限的命令" class="headerlink" title="改变权限的命令"></a>改变权限的命令</h2><p>chmod 改变文件或目录的权限</p>
<p>chmod 755 abc：赋予abc权限rwxr-xr-x</p>
<p>chmod u=rwx，g=rx，o=rx abc：同上u=用户权限，g=组权限，o=不同组其他用户权限</p>
<p>chmod u-x，g+w abc：给abc去除用户执行的权限，增加组写的权限</p>
<p>chmod a+r abc：给所有用户添加读的权限</p>
<h2 id="改变所有者（chown）和用户组（chgrp）命令"><a href="#改变所有者（chown）和用户组（chgrp）命令" class="headerlink" title="改变所有者（chown）和用户组（chgrp）命令"></a>改变所有者（chown）和用户组（chgrp）命令</h2><p>chown xiaoming abc：改变abc的所有者为xiaoming</p>
<p>chgrp root abc：改变abc所属的组为root</p>
<p>chown root ./abc：改变abc这个目录的所有者是root</p>
<p>chown ‐R root ./abc：改变abc这个目录及其下面所有的文件和目录的所有者是root</p>
<p>改变用户所在组</p>
<p>在添加用户时，可以指定将该用户添加到哪个组中，同样用root的管理权限可以改变某个用户所在的组</p>
<ul>
<li>usermod ‐g 组名 用户名</li>
</ul>
<p>你可以用</p>
<ul>
<li>usermod ‐d 目录名 用户名，改变该用户登录的初始目录</li>
</ul>
<p>【参考】</p>
<ul>
<li><p>groupadd 组名，在linux中添加组</p>
</li>
<li><p>vi /etc/group，查看linux中所有组信息，可以看可以编辑</p>
</li>
<li><p>cat /etc/group，查看linux中所有组信息，只可以看不可以编辑</p>
</li>
<li><p>useradd ‐g 组名 用户名，创建用户的同时指定将该用户分配到哪个组下</p>
</li>
<li><p>vi /etc/passwd，查看linux中所有用户信息，可以看可以编辑</p>
</li>
<li><p>cat /etc/passwd，查看linux中所有用户信息，只可以看不可以编辑</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/20/linux-user/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="springlee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars3.githubusercontent.com/u/3699948?s=400&u=d38df3f75e632cbdcd135872bb8ca7a049b7cf75&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一叶知秋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/20/linux-user/" itemprop="url">Linux 用户详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-20T11:39:20+08:00">
                2019-03-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>用户账号文件 - passwd<br>用于保存用户的帐号基本信息，文件位置：/etc/passwd</p>
<p>每一行对应一个用户的帐号记录 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</span><br><span class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</span><br><span class="line">sync:x:4:65534:sync:/bin:/bin/sync</span><br><span class="line">games:x:5:60:games:/usr/games:/usr/sbin/nologin</span><br><span class="line">man:x:6:12:man:/var/cache/man:/usr/sbin/nologin</span><br><span class="line">lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin</span><br><span class="line">mail:x:8:8:mail:/var/mail:/usr/sbin/nologin</span><br><span class="line">news:x:9:9:news:/var/spool/news:/usr/sbin/nologin</span><br><span class="line">uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin</span><br><span class="line">proxy:x:13:13:proxy:/bin:/usr/sbin/nologin</span><br><span class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</span><br><span class="line">backup:x:34:34:backup:/var/backups:/usr/sbin/nologin</span><br><span class="line">list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin</span><br><span class="line">irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/u    sr/sbin/nologin</span><br><span class="line">nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin</span><br><span class="line">systemd-timesync:x:100:103:systemd Time Synchronization,,,:/run/sy    stemd:/bin/false</span><br><span class="line">systemd-network:x:101:104:systemd Network Management,,,:/run/syste    md/netif:/bin/false</span><br><span class="line">systemd-resolve:x:102:105:systemd Resolver,,,:/run/systemd/resolve    :/bin/false</span><br><span class="line">systemd-bus-proxy:x:103:106:systemd Bus Proxy,,,:/run/systemd:/bin    /false</span><br><span class="line">pi:x:1000:1000:,,,:/home/pi:/bin/bash</span><br><span class="line">messagebus:x:104:109::/var/run/dbus:/bin/false</span><br></pre></td></tr></table></figure>
<ul>
<li>字段1：用户帐号的名称</li>
<li>字段2：用户密码字串或者密码占位符“x”</li>
<li>字段3：用户帐号的UID号</li>
<li>字段4：所属基本组帐号的GID号</li>
<li>字段5：用户全名</li>
<li>字段6：宿主目录</li>
<li>字段7：登录Shell信息</li>
</ul>
<p>shadow<br>用于保存密码字串、密码有效期等信息，文件位置：/etc/shadow<br>每一行对应一个用户的密码记录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">root:$6$jEF6k6wr$0MM62Y.oofWi7FXthvvkALCgS9ruD0FdgzM804XDFG8DxncR8    LlwInRwoJk40UN9iCinXtbeHb57pJ1wuBSot0:17366:0:99999:7:::</span><br><span class="line">daemon:*:17352:0:99999:7:::</span><br><span class="line">bin:*:17352:0:99999:7:::</span><br><span class="line">sys:*:17352:0:99999:7:::</span><br><span class="line">sync:*:17352:0:99999:7:::</span><br><span class="line">games:*:17352:0:99999:7:::</span><br><span class="line">man:*:17352:0:99999:7:::</span><br><span class="line">lp:*:17352:0:99999:7:::</span><br><span class="line">mail:*:17352:0:99999:7:::</span><br><span class="line">news:*:17352:0:99999:7:::</span><br><span class="line">uucp:*:17352:0:99999:7:::</span><br><span class="line">proxy:*:17352:0:99999:7:::</span><br><span class="line">www-data:*:17352:0:99999:7:::</span><br><span class="line">backup:*:17352:0:99999:7:::</span><br><span class="line">list:*:17352:0:99999:7:::</span><br><span class="line">irc:*:17352:0:99999:7:::</span><br><span class="line">gnats:*:17352:0:99999:7:::</span><br><span class="line">nobody:*:17352:0:99999:7:::</span><br><span class="line">systemd-timesync:*:17352:0:99999:7:::</span><br><span class="line">systemd-network:*:17352:0:99999:7:::</span><br><span class="line">systemd-resolve:*:17352:0:99999:7:::</span><br><span class="line">systemd-bus-proxy:*:17352:0:99999:7:::</span><br><span class="line">pi:$6$J9HYz.1a$jZfOFQhtFT7el0/iUV2Z3egUxwtAk3SlzV5EGEe/gKuj68WALIY    4rmI9WCBK5a0lyU463ecf6WxAyzMUrqMRM1:17352:0:99999:7:::</span><br><span class="line">messagebus:*:17352:0:99999:7:::</span><br><span class="line">avahi:*:17352:0:99999:7:::</span><br><span class="line">ntp:*:17352:0:99999:7:::</span><br><span class="line">sshd:*:17352:0:99999:7:::</span><br></pre></td></tr></table></figure></p>
<ul>
<li>字段1：用户帐号的名称</li>
<li>字段2：加密的密码字串信息</li>
<li>字段3：上次修改密码的时间</li>
<li>字段4：密码的最短有效天数，默认值为0</li>
<li>字段5：密码的最长有效天数，默认值为99999 </li>
</ul>
<p>useradd命令<br>格式：useradd [选项]… 用户名<br>常用命令选项<br>-u：指定 UID 标记号<br>-d：指定宿主目录，缺省为 /home/用户名<br>-e：指定帐号失效时间<br>-g：指定用户的基本组名（或UID号）<br>-G：指定用户的附加组名（或GID号）<br>-M：不为用户建立并初始化宿主目录<br>-s：指定用户的登录Shell </p>
<p>主要的用户初始配置文件<br>~/.bash_profile：用户每次登录时执行<br>~/.bashrc：每次进入新的Bash环境时执行<br>~/.bash_logout：用户每次退出登录时执行 </p>
<ul>
<li>passwd命令<br>格式：passwd [选项]… 用户名 </li>
</ul>
<p>常用命令选项<br>-d：清空用户的密码，使之无需密码即可登录<br>-l：锁定用户帐号<br>-S：查看用户帐号的状态（是否被锁定）<br>-u：解锁用户帐号</p>
<ul>
<li>userdel命令<br>格式：userdel [-r] 用户名<br>添加 -r 选项时，表示连用户的宿主目录一并删除 </li>
</ul>
<ul>
<li><p>group、gshadow<br>与用户帐号文件相类似<br>/etc/group：保存组帐号基本信息<br>/etc/gshadow：保存组帐号的密码信息</p>
</li>
<li><p>groupadd<br>格式：groupadd [-g GID] 组帐号名</p>
</li>
<li><p>gpasswd命令<br>用途：设置组帐号密码（极少用）、添加/删除组成员<br>格式：gpasswd [选项]… 组帐号名 </p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/20/nginx-params/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="springlee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars3.githubusercontent.com/u/3699948?s=400&u=d38df3f75e632cbdcd135872bb8ca7a049b7cf75&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一叶知秋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/20/nginx-params/" itemprop="url">nginx  常用配置(转)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-20T10:39:20+08:00">
                2019-03-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>接上一篇文章，将server节点下的location节点中的proxy_pass配置为：http:// + upstream名称，即“<a href="http://spinglee”" target="_blank" rel="noopener">http://spinglee”</a>.</li>
</ul>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"># 通过 gzip 压缩页面</span><br><span class="line">gzip on;</span><br><span class="line">gzip_min_length 1k;</span><br><span class="line">gzip_buffers 4 16k;</span><br><span class="line">#gzip_http_version 1.0;</span><br><span class="line">gzip_comp_level 2;</span><br><span class="line">gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span><br><span class="line">gzip_vary off;</span><br><span class="line">gzip_disable &quot;MSIE [1-6]\.&quot;;</span><br><span class="line"></span><br><span class="line">upstream springlee &#123;</span><br><span class="line">    # 通过 IP:Port 连接</span><br><span class="line">    server 127.0.0.1:5200 weight=5 max_fails=3 fail_timeout=30s;</span><br><span class="line">    # 通过 UnixSocket Stream 连接，小诀窍：将socket文件放在/dev/shm目录下，可获得更好的性能</span><br><span class="line">    #server unix:/xxxpath/laravel-s-test/storage/laravels.sock weight=5 max_fails=3 fail_timeout=30s;</span><br><span class="line">    #server 192.168.1.1:5200 weight=3 max_fails=3 fail_timeout=30s;</span><br><span class="line">    #server 192.168.1.2:5200 backup;</span><br><span class="line">    keepalive 16;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    # 别忘了绑Host哟</span><br><span class="line">    server_name springlee.com;</span><br><span class="line">    root /xxxpath/laravel-s-test/public;</span><br><span class="line">    access_log /yyypath/log/nginx/$server_name.access.log  main;</span><br><span class="line">    autoindex off;</span><br><span class="line">    index index.html index.htm;</span><br><span class="line">    # Nginx处理静态资源(建议开启gzip)，springlee处理动态资源。</span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files $uri $uri/ @springlee;</span><br><span class="line">    &#125;</span><br><span class="line">    # 当请求PHP文件时直接响应404，防止暴露public/*.php</span><br><span class="line">    #location ~* \.php$ &#123;</span><br><span class="line">    #    return 404;</span><br><span class="line">    #&#125;</span><br><span class="line">    location @laravels &#123;</span><br><span class="line">        # proxy_connect_timeout 60s;</span><br><span class="line">        # proxy_send_timeout 60s;</span><br><span class="line">        # proxy_read_timeout 120s;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Connection &quot;&quot;;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Real-PORT $remote_port;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header Scheme $scheme;</span><br><span class="line">        proxy_set_header Server-Protocol $server_protocol;</span><br><span class="line">        proxy_set_header Server-Name $server_name;</span><br><span class="line">        proxy_set_header Server-Addr $server_addr;</span><br><span class="line">        proxy_set_header Server-Port $server_port;</span><br><span class="line">        proxy_pass http://springlee;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Gzip-参数说明"><a href="#Gzip-参数说明" class="headerlink" title="Gzip 参数说明"></a>Gzip 参数说明</h2><ul>
<li><p>第1行：开启Gzip</p>
</li>
<li><p>第2行：不压缩临界值，大于1K的才压缩，一般不用改</p>
</li>
<li><p>第3行：buffer，就是，嗯，算了不解释了，不用改</p>
</li>
<li><p>第4行：用了反向代理的话，末端通信是HTTP/1.0，有需求的应该也不用看我这科普文了；有这句的话注释了就行了，默认是HTTP/1.1</p>
</li>
<li><p>第5行：压缩级别，1-10，数字越大压缩的越好，时间也越长，看心情随便改吧</p>
</li>
<li><p>第6行：进行压缩的文件类型，缺啥补啥就行了，JavaScript有两种写法，最好都写上吧，总有人抱怨js文件没有压缩，其实多写一种格式application/javascript 就行了</p>
</li>
<li><p>第7行：跟Squid等缓存服务有关，on的话会在Header里增加”Vary: Accept-Encoding”，我不需要这玩意，自己对照情况看着办吧</p>
</li>
<li><p>第8行：IE6对Gzip不怎么友好，不给它Gzip了</p>
</li>
</ul>
<h2 id="Nginx-参数说明"><a href="#Nginx-参数说明" class="headerlink" title="Nginx 参数说明"></a>Nginx 参数说明</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/19/nginx-upstream/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="springlee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars3.githubusercontent.com/u/3699948?s=400&u=d38df3f75e632cbdcd135872bb8ca7a049b7cf75&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一叶知秋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/19/nginx-upstream/" itemprop="url">nginx 负载均衡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-19T09:06:25+08:00">
                2019-03-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Nginx配置upstream实现负载均衡"><a href="#Nginx配置upstream实现负载均衡" class="headerlink" title="Nginx配置upstream实现负载均衡"></a>Nginx配置upstream实现负载均衡</h2><p>假设Nginx没有只只能代理一台服务器的话，那它也不可能像今天这么火。Nginx能够配置代理多台服务器。当一台服务器宕机之后。仍能保持系统可用。详细配置步骤例如以下：</p>
<ul>
<li><p>在http节点下，加入upstream节点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream spinglee &#123; </span><br><span class="line">      server 10.0.6.108:7080; </span><br><span class="line">      server 10.0.0.85:8980; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将server节点下的location节点中的proxy_pass配置为：http:// + upstream名称，即“<a href="http://spinglee”" target="_blank" rel="noopener">http://spinglee”</a>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location / &#123; </span><br><span class="line">               root  html; </span><br><span class="line">               index  index.html index.htm; </span><br><span class="line">               proxy_pass http://spinglee; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>如今负载均衡初步完毕了。upstream依照轮询（默认）方式进行负载，每一个请求按时间顺序逐一分配到不同的后端服务器。假设后端服务器down掉。能自己主动剔除。尽管这样的方式简便、成本低廉。但缺点是：可靠性低和负载分配不均衡。</li>
</ul>
</li>
</ul>
<p>适用于图片服务器集群和纯静态页面服务器集群。</p>
<h2 id="除此之外，upstream还有其他的分配策略，分别例如以下："><a href="#除此之外，upstream还有其他的分配策略，分别例如以下：" class="headerlink" title="除此之外，upstream还有其他的分配策略，分别例如以下："></a>除此之外，upstream还有其他的分配策略，分别例如以下：</h2><ul>
<li>weight（权重）<br>指定轮询几率，weight和訪问比率成正比，用于后端服务器性能不均的情况。例如以下所看到的。10.0.0.88的訪问比率要比10.0.0.77的訪问比率高一倍。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream spinglee&#123; </span><br><span class="line">      server 10.0.0.77 weight=5; </span><br><span class="line">      server 10.0.0.88 weight=10; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ip_hash（訪问ip）</p>
<p>每一个请求按訪问ip的hash结果分配。这样每一个訪客固定訪问一个后端服务器，能够解决session的问题。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">upstream spinglee&#123; </span><br><span class="line">      ip_hash; </span><br><span class="line">      server 10.0.0.10:8080; </span><br><span class="line">      server 10.0.0.11:8080; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>fair（第三方）</li>
</ul>
<p>按后端服务器的响应时间来分配请求。响应时间短的优先分配。</p>
<p>与weight分配策略相似。</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> upstream spinglee&#123;      </span><br><span class="line">      server 10.0.0.10:8080; </span><br><span class="line">      server 10.0.0.11:8080; </span><br><span class="line">      fair; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>url_hash（第三方）</li>
</ul>
<p>按訪问url的hash结果来分配请求，使每一个url定向到同一个后端服务器。后端服务器为缓存时比較有效。</p>
<p>注意：在upstream中加入hash语句。server语句中不能写入weight等其他的參数，hash_method是使用的hash算法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">upstream spinglee&#123; </span><br><span class="line">      server 10.0.0.10:7777; </span><br><span class="line">      server 10.0.0.11:8888; </span><br><span class="line">      hash $request_uri; </span><br><span class="line">      hash_method crc32; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="upstream还能够为每一个设备设置状态值，这些状态值的含义分别例如以下："><a href="#upstream还能够为每一个设备设置状态值，这些状态值的含义分别例如以下：" class="headerlink" title="upstream还能够为每一个设备设置状态值，这些状态值的含义分别例如以下："></a>upstream还能够为每一个设备设置状态值，这些状态值的含义分别例如以下：</h2><ul>
<li><p>down 表示单前的server临时不參与负载.</p>
</li>
<li><p>weight 默觉得1.weight越大，负载的权重就越大。</p>
</li>
<li><p>max_fails ：同意请求失败的次数默觉得1.当超过最大次数时，返回proxy_next_upstream 模块定义的错误.</p>
</li>
<li><p>fail_timeout : max_fails次失败后。暂停的时间。</p>
</li>
<li><p>backup： 其他全部的非backup机器down或者忙的时候，请求backup机器。所以这台机器压力会最轻。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">upstream spinglee&#123; #定义负载均衡设备的Ip及设备状态 </span><br><span class="line">      ip_hash; </span><br><span class="line">      server 10.0.0.11:9090 down; </span><br><span class="line">      server 10.0.0.11:8080 weight=2; </span><br><span class="line">      server 10.0.0.11:6060; </span><br><span class="line">      server 10.0.0.11:7070 backup; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/hexo-github/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="springlee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars3.githubusercontent.com/u/3699948?s=400&u=d38df3f75e632cbdcd135872bb8ca7a049b7cf75&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一叶知秋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/hexo-github/" itemprop="url">基于Hexo+gitbub快速搭建自己的博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:26:56+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1、什么是Hexo"><a href="#1、什么是Hexo" class="headerlink" title="1、什么是Hexo "></a>1、什么是Hexo </h2><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
<h2 id="2、安装"><a href="#2、安装" class="headerlink" title="2、安装"></a>2、安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>这边有个小坑:注意node和npm的版本不然启动不了服务器。<br>几步操作完访问<code>http://localhost:4000/</code>，此时Hexo安装完成，如此简单。</p>
<h2 id="3-更换主题"><a href="#3-更换主题" class="headerlink" title="3.更换主题"></a>3.更换主题</h2><p><img src="../images/old_theme.png" alt=""><br>当我们看到如上界面时，内心是奔溃的这完全不符合我的高逼格。经过一番谷歌百度找到了<a href="http://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="noopener">next</a>主题</p>
<p>在 Hexo 中有两份主要的配置文件，其名称都是 _config.yml。 其中，一份位于站点根目录下，主要包含 Hexo 本身的配置；另一份位于主题目录下，这份配置由主题作者提供，主要用于配置主题相关的选项。<br>为了描述方便，在以下说明中，将前者称为<code>站点配置文件</code>， 后者称为<code>主题配置文件</code><br>1、 下载主题<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> your-hexo-site</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></p>
<p>2、 启用主题<br>与所有 Hexo 主题启用的模式一样。 当 克隆/下载 完成后，打开<code>站点配置文件</code>， 找到 theme 字段，并将其值更改为 next。<br>此刻大功告成（ps:其他配置参考相关文档）</p>
<h2 id="4-绑定github"><a href="#4-绑定github" class="headerlink" title="4.绑定github"></a>4.绑定github</h2><p>1.在github上 新建一个 repository 名字（springlee.github.io）建议起名字和自己的github重名<br>2.部署<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: https://github.com/springlee/springlee.github.io.git</span><br><span class="line">  branch: master</span><br><span class="line">  message:</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/31/sentry-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="springlee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars3.githubusercontent.com/u/3699948?s=400&u=d38df3f75e632cbdcd135872bb8ca7a049b7cf75&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一叶知秋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/31/sentry-install/" itemprop="url">sentry 自动化日志收集和监控系统搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-31T11:56:45+08:00">
                2018-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://laravel-china.org/articles/4235/sentry-automation-exception-alert" target="_blank" rel="noopener">Sentry 自动化异常提醒</a> 这篇文章已经介绍的很清楚了，这里直接讲一讲搭建自己的 <code>sentry</code> 服务，这样就免费使用 <code>sentry</code> 这个服务。 </p>
<h2 id="1、-安装-docker"><a href="#1、-安装-docker" class="headerlink" title="1、 安装 docker"></a>1、 安装 docker</h2><p>首先要确认你的 Ubuntu 版本是否符合安装 Docker 的前提条件。如果没有问题，你可以通过下边的方式来安装 Docker ： 使用具有 sudo 权限的用户来登录你的 Ubuntu 。<br>查看你是否安装了 wget </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> wget</span><br></pre></td></tr></table></figure>
<p>如果 wget 没有安装，先升级包管理器，然后再安装它。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install wget</span><br></pre></td></tr></table></figure>
<p>获取最新版本的 Docker 安装包<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -qO- https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure></p>
<p>系统会提示你输入sudo密码，输入完成之后，就会下载脚本并且安装 Docker 及依赖包。</p>
<p>可以查看版本号并确认是否安装成功。<br>由于某种神秘原因国内无法直接从 docker 官方库直接获取镜像 这里我们使用 <a href="https://www.daocloud.io/mirror#accelerator-doc" target="_blank" rel="noopener">Docker 加速器</a> 运行下面命令即可。<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://4031ebb7.m.daocloud.io</span><br></pre></td></tr></table></figure></p>
<h2 id="2、安装-docker-compose"><a href="#2、安装-docker-compose" class="headerlink" title="2、安装 docker-compose"></a>2、安装 docker-compose</h2><p>这里推荐使用 Python 的 pip 管理工具来安装 docker-compose</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install -U docker-compose</span><br></pre></td></tr></table></figure>
<p>到这里安装就结束了;Compose 已经安装完成。你可以使用<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure></p>
<p>来进行测试</p>
<h2 id="3、-正式搭建sentry"><a href="#3、-正式搭建sentry" class="headerlink" title="3、 正式搭建sentry"></a>3、 正式搭建sentry</h2><p>做完了准备工作，就可以开始搭建sentry了。</p>
<p>从 <a href="https://github.com/getsentry/onpremise" target="_blank" rel="noopener">GitHub</a> 上面获取最新的 sentry</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/getsentry/onpremise.git</span><br></pre></td></tr></table></figure>
<p>获取到本地之后，就可以根据他的README.md开始着手搭建了，整个过程还是比较顺利的。</p>
<p>进入 clone 下来的 <code>onpremise</code> 目录依次执行</p>
<ol>
<li>创建对应的目录  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p data/&#123;sentry,postgres&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="2">
<li><p>获取项目的 key</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash  docker-compose run --rm web config generate-secret-key</span><br></pre></td></tr></table></figure>
<p><img src="https://lccdn.phphub.org/uploads/images/201703/29/5978/cl5ribeIo5.png" alt="file"></p>
<p>复制获取到的 key 字符串</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure>
<p>插入 docker-compose.yml 文件中<br><img src="https://lccdn.phphub.org/uploads/images/201703/29/5978/MI7aJM7jbz.png" alt="file"></p>
</li>
<li><p>创建项目的 superuser</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose run --rm web upgrade</span><br></pre></td></tr></table></figure>
<p>该过程会让你输入 用户邮箱 和密码 一路走下去 即可。</p>
<ol start="4">
<li>开启 sentry 服务</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>
<p>这时候输入你的 http:://ip:9000 即可进入你的 sentry</p>
<h2 id="4、简单配置"><a href="#4、简单配置" class="headerlink" title="4、简单配置"></a>4、简单配置</h2><p>登陆以后 右上角有 New Project</p>
<p><img src="https://lccdn.phphub.org/uploads/images/201703/29/5978/KqiVNsRUJb.png" alt="file"></p>
<p><img src="https://lccdn.phphub.org/uploads/images/201703/29/5978/XRkeqwvTDh.png" alt="file"></p>
<p><img src="https://lccdn.phphub.org/uploads/images/201703/29/5978/C480PIRJ5n.png" alt="file"></p>
<p>体验 sentry 带来的快感吧！（本文完）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars3.githubusercontent.com/u/3699948?s=400&u=d38df3f75e632cbdcd135872bb8ca7a049b7cf75&v=4"
                alt="springlee" />
            
              <p class="site-author-name" itemprop="name">springlee</p>
              <p class="site-description motion-element" itemprop="description">一个90后老男孩的博客</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/springlee" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:jslichun123@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">springlee</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
